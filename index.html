<html>
    <head>
 	   <title>DeviceOrientationEvent</title>
	   <meta charset="UTF-8" />
	</head>
	<body>
	    <p><button onclick="getGrant()">授权陀螺仪</button></p>
		<p>左右：<span id="alpha">0</span></p>
		<p>前后：<span id="beta">0</span></p>
		<p>扭转：<span id="gamma">0</span></p>
		<p>指北针指向：<span id="heading">0</span>度</p>
		<p>指北针精度：<span id="accuracy">0</span>度</p>
		<script type="text/javascript">
		function orientationHandler(event) {
			document.getElementById("alpha").innerHTML = event.alpha;
			document.getElementById("beta").innerHTML = event.beta;
			document.getElementById("gamma").innerHTML = event.gamma;
			document.getElementById("heading").innerHTML = event.webkitCompassHeading;
			document.getElementById("accuracy").innerHTML = event.webkitCompassAccuracy;
		}
		
		if (window.DeviceOrientationEvent) {
		  window.addEventListener("deviceorientation", orientationHandler, false);
		} else {
		  document.body.innerHTML = "What user agent u r using???";
		}

		//ios授权
	    function getGrant() {
	    	alert("getGrant")
	        if (!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)) {
	            window.DeviceOrientationEvent.requestPermission()
	            .then(state => {
	            	alert(state)
	                switch (state) {
	                	case "granted":
	                        alert("陀螺仪授权成功");
	                    break;
	                    case "denied":
	                        alert("你拒绝了使用陀螺仪");
	                    break;
	                    case "prompt":
	                        alert("其他行为");
	                    break;
	                }
	            });
	        }
	    }


   	 	</script>
	</body>
</html>